{"ast":null,"code":"import{createPortal}from'react-dom';import{useEffect,useState,useRef}from'react';import Button from'../../../components/shared/Button';import FormField from'../../../components/shared/FormField';import{login}from'../service';import{useAuth}from'../context';import copyStyles from'../../../utils/copyStyles';import'./LoginPage.css';import{useLocation,useNavigate}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginPage(){const{onLogin}=useAuth();const[credentials,setCredentials]=useState({username:'',password:''});const[error,setError]=useState(null);const[isFetching,setIsFeching]=useState(false);const location=useLocation();const navigate=useNavigate();const handleSubmit=async event=>{event.preventDefault();try{var _location$state,_location$state$from;setIsFeching(true);await login(credentials);setIsFeching(false);onLogin();const to=(location===null||location===void 0?void 0:(_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/';navigate(to);}catch(error){setIsFeching(false);setError(error);}};const handleChange=event=>{setCredentials(currentCredentials=>({...currentCredentials,[event.target.name]:event.target.value}));};const resetError=()=>{setError(null);};const{username,password}=credentials;const buttonDisabled=!(username&&password)||isFetching;return/*#__PURE__*/_jsxs(\"div\",{className:\"loginPage\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"loginPage-title\",children:\"Log in to Twitter\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(FormField,{type:\"text\",name:\"username\",label:\"phone, email or username\",className:\"loginForm-field\",onChange:handleChange,value:credentials.username}),/*#__PURE__*/_jsx(FormField,{type:\"password\",name:\"password\",label:\"password\",className:\"loginForm-field\",onChange:handleChange,value:credentials.password}),/*#__PURE__*/_jsx(Button,{type:\"submit\",$variant:\"primary\",disabled:buttonDisabled,className:\"loginForm-submit\",children:isFetching?'Connecting...':'Log in'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"loginPage-error\",onClick:resetError,children:error.message})]})]});}function LoginPagePortal(_ref){let{count}=_ref;const portalContainer=useRef(document.createElement('div'));useEffect(()=>{const externalWindow=window.open('','','width=600, heigth=400, left=200, top=200');copyStyles(document,externalWindow.document);externalWindow.document.body.appendChild(portalContainer.current);});return/*#__PURE__*/createPortal(/*#__PURE__*/_jsx(LoginPage,{count:count}),portalContainer.current);}export default LoginPagePortal;","map":{"version":3,"names":["createPortal","useEffect","useState","useRef","Button","FormField","login","useAuth","copyStyles","useLocation","useNavigate","jsx","_jsx","jsxs","_jsxs","LoginPage","onLogin","credentials","setCredentials","username","password","error","setError","isFetching","setIsFeching","location","navigate","handleSubmit","event","preventDefault","_location$state","_location$state$from","to","state","from","pathname","handleChange","currentCredentials","target","name","value","resetError","buttonDisabled","className","children","onSubmit","type","label","onChange","$variant","disabled","onClick","message","LoginPagePortal","_ref","count","portalContainer","document","createElement","externalWindow","window","open","body","appendChild","current"],"sources":["/Users/alex/Desktop/REACT_BOOTCAMP/twitter_react/FullStack_React_app_tweeter/src/pages/auth/LoginPage/LoginPage.js"],"sourcesContent":["import { createPortal } from 'react-dom';\nimport { useEffect, useState, useRef } from 'react';\nimport Button from '../../../components/shared/Button';\nimport FormField from '../../../components/shared/FormField';\nimport { login } from '../service';\nimport { useAuth } from '../context';\nimport copyStyles from '../../../utils/copyStyles';\n\nimport './LoginPage.css';\nimport { useLocation, useNavigate } from 'react-router';\n\nfunction LoginPage() {\n  const { onLogin } = useAuth();\n  const [credentials, setCredentials] = useState({\n    username: '',\n    password: '',\n  });\n  const [error, setError] = useState(null);\n  const [isFetching, setIsFeching] = useState(false);\n  const location = useLocation();\n  const navigate = useNavigate();\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n\n    try {\n      setIsFeching(true);\n      await login(credentials);\n      setIsFeching(false);\n      onLogin();\n      const to = location?.state?.from?.pathname || '/';\n      navigate(to);\n    } catch (error) {\n      setIsFeching(false);\n      setError(error);\n    }\n  };\n\n  const handleChange = event => {\n    setCredentials(currentCredentials => ({\n      ...currentCredentials,\n      [event.target.name]: event.target.value,\n    }));\n  };\n\n  const resetError = () => {\n    setError(null);\n  };\n\n  const { username, password } = credentials;\n  const buttonDisabled = !(username && password) || isFetching;\n\n  return (\n    <div className=\"loginPage\">\n      <h1 className=\"loginPage-title\">Log in to Twitter</h1>\n      <form onSubmit={handleSubmit}>\n        <FormField\n          type=\"text\"\n          name=\"username\"\n          label=\"phone, email or username\"\n          className=\"loginForm-field\"\n          onChange={handleChange}\n          value={credentials.username}\n        />\n        <FormField\n          type=\"password\"\n          name=\"password\"\n          label=\"password\"\n          className=\"loginForm-field\"\n          onChange={handleChange}\n          value={credentials.password}\n        />\n        <Button\n          type=\"submit\"\n          $variant=\"primary\"\n          disabled={buttonDisabled}\n          className=\"loginForm-submit\"\n        >\n          {isFetching ? 'Connecting...' : 'Log in'}\n        </Button>\n        {error && (\n          <div className=\"loginPage-error\" onClick={resetError}>\n            {error.message}\n          </div>\n        )}\n      </form>\n    </div>\n  );\n}\n\nfunction LoginPagePortal ({count}){\n  const portalContainer = useRef(document.createElement('div'));\n\n  useEffect(() => {\n    const externalWindow = window.open(\n      '', '', 'width=600, heigth=400, left=200, top=200'\n      );\n    copyStyles(document, externalWindow.document);\n    externalWindow.document.body.appendChild(portalContainer.current);\n  });\n\n  return createPortal(<LoginPage count={count}/>, portalContainer.current);\n}\n\nexport default LoginPagePortal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}