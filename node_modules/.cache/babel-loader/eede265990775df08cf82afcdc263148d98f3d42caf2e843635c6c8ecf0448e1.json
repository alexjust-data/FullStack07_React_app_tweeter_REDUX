{"ast":null,"code":"import{useEffect,useRef,useState}from'react';import Content from'../../../components/layout/Content';import Button from'../../../components/shared/Button';import Photo from'../../../components/shared/Photo';import Textarea from'../../../components/shared/Textarea';import'./NewTweetPage.css';import{createTweet}from'../service';import{useNavigate}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const MIN_CHARACTERS=5;const MAX_CHARACTERS=140;function NewTweetPage(){const[content,setContent]=useState('');const[isFetching,setIsFetching]=useState(false);const navigate=useNavigate();const counterRef=useRef(0);const formRef=useRef(null);const divRef=useRef(null);const textareaRef=useRef(null);// { current: null }\nuseEffect(()=>{counterRef.current++;});useEffect(()=>{console.log(formRef);},[]);useEffect(()=>{console.log('textarea',textareaRef);textareaRef.current.focus();});const handleChange=event=>{setContent(event.target.value);};const handleSubmit=async event=>{event.preventDefault();try{setIsFetching(true);const tweet=await createTweet({content});navigate(\"../\".concat(tweet.id),{relative:'path'});}catch(error){if(error.status===401){navigate('/login');}else{setIsFetching(false);// Show error\n}}};const characters=\"\".concat(content.length,\" / \").concat(MAX_CHARACTERS);const buttonDisabled=content.length<=MIN_CHARACTERS||isFetching;return/*#__PURE__*/_jsx(Content,{title:\"What are you thinking?\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"newTweetPage\",ref:element=>{console.log(element);divRef.current=element;},children:[/*#__PURE__*/_jsx(\"div\",{className:\"left\",children:/*#__PURE__*/_jsx(Photo,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"right\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,ref:formRef,children:[/*#__PURE__*/_jsx(Textarea,{className:\"newTweetPage-textarea\",placeholder:\"Hey! What's up!\",value:content,onChange:handleChange,maxLength:MAX_CHARACTERS,ref:textareaRef}),/*#__PURE__*/_jsxs(\"div\",{className:\"newTweetPage-footer\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"newTweetPage-characters\",children:characters}),/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"newTweetPage-submit\",$variant:\"primary\",disabled:buttonDisabled,children:\"Let's go!\"})]})]})})]})});}export default NewTweetPage;","map":{"version":3,"names":["useEffect","useRef","useState","Content","Button","Photo","Textarea","createTweet","useNavigate","jsx","_jsx","jsxs","_jsxs","MIN_CHARACTERS","MAX_CHARACTERS","NewTweetPage","content","setContent","isFetching","setIsFetching","navigate","counterRef","formRef","divRef","textareaRef","current","console","log","focus","handleChange","event","target","value","handleSubmit","preventDefault","tweet","concat","id","relative","error","status","characters","length","buttonDisabled","title","children","className","ref","element","onSubmit","placeholder","onChange","maxLength","type","$variant","disabled"],"sources":["/Users/alex/Desktop/REACT_BOOTCAMP/twitter_react/FullStack_React_app_tweeter/src/pages/tweets/NewTweetPage/NewTweetPage.js"],"sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport Content from '../../../components/layout/Content';\nimport Button from '../../../components/shared/Button';\nimport Photo from '../../../components/shared/Photo';\nimport Textarea from '../../../components/shared/Textarea';\n\nimport './NewTweetPage.css';\nimport { createTweet } from '../service';\nimport { useNavigate } from 'react-router';\n\nconst MIN_CHARACTERS = 5;\nconst MAX_CHARACTERS = 140;\n\nfunction NewTweetPage() {\n  const [content, setContent] = useState('');\n  const [isFetching, setIsFetching] = useState(false);\n  const navigate = useNavigate();\n  const counterRef = useRef(0);\n  const formRef = useRef(null);\n  const divRef = useRef(null);\n  const textareaRef = useRef(null);\n\n  // { current: null }\n\n  useEffect(() => {\n    counterRef.current++;\n  });\n\n  useEffect(() => {\n    console.log(formRef);\n  }, []);\n\n  useEffect(() => {\n    console.log('textarea', textareaRef);\n    textareaRef.current.focus();\n  });\n\n  const handleChange = event => {\n    setContent(event.target.value);\n  };\n\n  const handleSubmit = async event => {\n    event.preventDefault();\n    try {\n      setIsFetching(true);\n      const tweet = await createTweet({ content });\n      navigate(`../${tweet.id}`, { relative: 'path' });\n    } catch (error) {\n      if (error.status === 401) {\n        navigate('/login');\n      } else {\n        setIsFetching(false);\n        // Show error\n      }\n    }\n  };\n\n  const characters = `${content.length} / ${MAX_CHARACTERS}`;\n  const buttonDisabled = content.length <= MIN_CHARACTERS || isFetching;\n\n  return (\n    <Content title=\"What are you thinking?\">\n      <div\n        className=\"newTweetPage\"\n        ref={element => {\n          console.log(element);\n          divRef.current = element;\n        }}\n      >\n        <div className=\"left\">\n          <Photo />\n        </div>\n        <div className=\"right\">\n          <form onSubmit={handleSubmit} ref={formRef}>\n            <Textarea\n              className=\"newTweetPage-textarea\"\n              placeholder=\"Hey! What's up!\"\n              value={content}\n              onChange={handleChange}\n              maxLength={MAX_CHARACTERS}\n              ref={textareaRef}\n            />\n            <div className=\"newTweetPage-footer\">\n              <span className=\"newTweetPage-characters\">{characters}</span>\n              <Button\n                type=\"submit\"\n                className=\"newTweetPage-submit\"\n                $variant=\"primary\"\n                disabled={buttonDisabled}\n              >\n                Let's go!\n              </Button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </Content>\n  );\n}\n\nexport default NewTweetPage;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}